<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:views="clr-namespace:PortfolioManager.UI.Views"
                    xmlns:viewmodels="clr-namespace:PortfolioManager.UI.ViewModels"
                    xmlns:controls="clr-namespace:PortfolioManager.UI.Controls"
                    xmlns:model="clr-namespace:PortfolioManager.Model.Portfolios;assembly=PortfolioManager.Model">

    <DataTemplate DataType="{x:Type viewmodels:TransactionsViewModel}">

        <Grid>

            <StackPanel  Visibility="Collapsed">

           <!--     <StackPanel.Triggers>
                    <DataTrigger Binding="{Binding EditingTransaction}" Value="true">
                        <Setter Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </StackPanel.Triggers> -->
                
                <ContentControl Content="{Binding CurrentTransactionViewModel}" />

                <StackPanel Orientation="Horizontal">

                    <Button Command="{Binding CancelTransactionCommand}">
                        <TextBlock Text="Cancel"/>
                    </Button>
                    <Button Command="{Binding SaveTransactionCommand}">
                        <TextBlock Text="Save"/>
                    </Button>
                    <Button Command="{Binding DeleteTransactionCommand}">
                        <TextBlock Text="Delete"/>
                    </Button>
                </StackPanel>
            </StackPanel>

            <Grid  Visibility="Visible">

                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <ComboBox Grid.Row="0" ItemsSource="{Binding TransactionTypes}" SelectedIndex="0" controls:SelectionChangedCommand.Command="{Binding AddTransactionCommand}" controls:SelectionChangedCommand.CommandParameter="{x:Static model:TransactionType.OpeningBalance}"/>

                <ListView Grid.Row="1" ItemsSource="{Binding Transactions}" Margin="0,10,0,0" SelectionMode="Single" controls:DoubleClickCommand.Command="{Binding EditTransactionCommand}" controls:DoubleClickCommand.CommandParameter="{Binding SelectedValue, RelativeSource={RelativeSource Self}}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Date" Width="70" DisplayMemberBinding="{Binding TransactionDate, StringFormat={}{0:d}, Mode=OneWay}"/>
                            <GridViewColumn Header="Company" Width="200" DisplayMemberBinding="{Binding CompanyName, Mode=OneWay}"/>
                            <GridViewColumn Header="Description" Width="Auto" DisplayMemberBinding="{Binding Description, Mode=OneWay}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>

        </Grid>
        
    </DataTemplate>

</ResourceDictionary>